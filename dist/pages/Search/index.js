(qq["webpackJsonp"]=qq["webpackJsonp"]||[]).push([[20],{47:function(e,t,n){e.exports=n.p+"Images/delete.png"},76:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(5),i=n(15),o=n(6),c=n(7),s=n(4),r=n(9),l=n(10),h=n(3),d=n(12),u=n(1),f=n(8),j=n.n(f),b=(n(76),n(30)),g=n(29),p=n.n(g),O=n(31),y=n.n(O),m=n(47),v=n.n(m),k=n(13),x=n(0),S=function(e){Object(r["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(o["a"])(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c)),Object(h["a"])(Object(s["a"])(e),"state",{historys:[],goods:[],inputVal:"",condition:"",hidden:!1,show:!0,ifdelete:!0}),Object(h["a"])(Object(s["a"])(e),"handleConfirm",(function(){var t=e.state.inputVal,n=e.state,a=n.historys,o=n.condition;if(""!==t.trim()&&(console.log(t),a.length<8)){var c={id:a.length,name:t},s=[c].concat(Object(i["a"])(a));e.setState({hidden:!0,historys:s}),j.a.setStorageSync("history",s),e.getsearch(o)}})),Object(h["a"])(Object(s["a"])(e),"clearHistory",(function(){var t=e.state.ifdelete,n=!t;e.setState({ifdelete:n})})),Object(h["a"])(Object(s["a"])(e),"handleDelete",(function(t){var n=e.state.historys,a=n.filter((function(e){return e.id!==t}));e.setState({historys:a}),j.a.setStorageSync("history",a)})),Object(h["a"])(Object(s["a"])(e),"handleBack",(function(){j.a.reLaunch({url:"/pages/Square/Square"})})),Object(h["a"])(Object(s["a"])(e),"getsearch",(function(t){Object(k["a"])("/goods/details/all/condition/".concat(t),{},"GET").then((function(t){console.log(t);var n=e.state.goods;null!==t.data?(n=n.concat(t.data),j.a.stopPullDownRefresh(),j.a.hideNavigationBarLoading(),e.setState({goods:n,show:!1})):(j.a.showToast({title:"\u5230\u5e95\u5566\uff01",duration:2e3}),j.a.stopPullDownRefresh(),j.a.hideNavigationBarLoading())}))})),Object(h["a"])(Object(s["a"])(e),"handleClickContent",(function(t){e.getsearch(t),e.setState({hidden:!0})})),e}return Object(c["a"])(n,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidShow",value:function(){var e=j.a.getStorageSync("history")||[];this.setState({historys:e})}},{key:"componentDidHide",value:function(){}},{key:"onInput",value:function(e){var t=e.detail.value;this.setState({inputVal:t,condition:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.historys,a=t.hidden,i=t.goods,o=t.show,c=t.ifdelete,s=this.state.inputVal;return Object(x["jsxs"])(u["f"],{children:[Object(x["jsxs"])(u["f"],{className:"search-header",children:[Object(x["jsx"])(u["b"],{src:y.a,style:{width:20,height:20,marginLeft:10},onClick:this.handleBack}),Object(x["jsx"])(u["c"],{type:"text",placeholder:"",value:s,onInput:this.onInput.bind(this),focus:!0}),Object(x["jsx"])(u["b"],{src:p.a,style:{width:32,height:32},onClick:this.handleConfirm})]}),a?null:Object(x["jsxs"])(u["f"],{className:"box",children:[Object(x["jsx"])(u["f"],{className:"History",children:n.map((function(t){return Object(x["jsxs"])(u["f"],{className:"search-history",style:{display:n.length?"block":"none"},children:[Object(x["jsx"])(u["d"],{onClick:function(){return e.handleClickContent(t.name)},children:t.name},t.id),c?null:Object(x["jsx"])(u["d"],{onClick:function(){return e.handleDelete(t.id)},style:{marginLeft:7},children:"\xd7"})]},"Search")}))}),Object(x["jsx"])(u["b"],{src:v.a,style:{width:25,height:25,marginLeft:15},onClick:this.clearHistory})]}),o?null:Object(x["jsx"])(u["f"],{className:"show",children:i.map((function(e){return Object(x["jsx"])(b["a"],{content:e.content,price:e.price,iffavorite:e.if_collected,username:e.user_nickname,QQ:e.qq_account,user_image:e.user_image,item_image:e.goods_images_videos,goods_id:e.id},"item")}))})]})}}]),n}(d["Component"]),w={navigationBarTitleText:"\u641c\u7d22"};Page(Object(a["createPageConfig"])(S,"pages/Search/index",{root:{cn:[]}},w||{}))}},[[94,0,1,2,3]]]);